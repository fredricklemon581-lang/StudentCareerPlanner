# 智慧学业规划系统 (StudentCareerPlanner) - 技术白皮书与产品文档

<p align="center">
  <strong>🎓 StudentCareerPlanner v2.0.0</strong><br>
  AI驱动的下一代学业分析与职业规划平台
</p>

---

## 📖 目录

1. [产品综述与开发背景](#一产品综述与开发背景)
2. [核心优势功能](#二核心优势功能)
3. [技术架构深度解析](#三技术架构深度解析)
4. [AI 引擎与 API 集成详情](#四ai-引擎与-api-集成详情)
5. [未来迭代路线图](#五未来迭代路线图)

---

## 一、产品综述与开发背景

### 1.1 开发背景
在当前的教育环境下，学生面临着巨大的升学压力和复杂的选科抉择（如"3+1+2"或"3+3"新高考模式）。传统的学业规划往往依赖经验主义，缺乏数据支撑，且难以做到"千人千面"的心理疏导。教师和家长也苦于无法从海量成绩数据中快速提取有效信息。

### 1.2 开发目的
本软件旨在打造一个**"数据+心理+规划"**三位一体的智能闭环系统：
1.  **数据化决策**：将碎片化的考试发数据转化为直观的图表，科学指导选科。
2.  **AI心理赋能**：利用大模型扮演"心理大师"，通过对话挖掘学生的潜意识兴趣与价值观。
3.  **普惠教育**：降低专业生涯规划的门槛，让每位学生都能拥有专属的"AI生涯规划师"。

---

## 二、核心优势功能

### 🌟 优势一：Apple 设计美学的交互体验
- **视觉语言**：严格遵循 Apple Human Interface Guidelines (HIG)。
- **色彩科学**：采用 SF 字体与经过精心调试的色彩系统 (#007AFF Blue, #34C759 Green, #FF9500 Orange)，在保证信息密度的同时减少视觉疲劳。
- **动态组件**：自研 `StatCard` (动态统计卡片) 与 `NavButton` (胶囊式导航)，支持细腻的微交互与状态反馈。

### 🌟 优势二："心理大师"级 AI 咨询
- **角色扮演**：AI 不仅仅是问答机器，而是被设定为一位"温暖、睿智的教育心理学家"。
- **深度对话**：通过 10 轮循循善诱的对话（从破冰到价值观探索），引导学生自我发现。
- **全知视角**：AI 在对话时实时读取学生的**成绩全景画像**，能指出"你虽然物理考得不好，但我看到你在逻辑题上的得分率很高"等深层洞察。

### 🌟 优势三：多维数据关联分析
- **时间维度**：自动生成单科及总分的趋势折线图，识别成绩波动规律。
- **知识图谱**：建立"试卷-题目-知识点"的三级关联，精准定位薄弱知识点（如"函数单调性"掌握率仅 45%）。
- **雷达画像**：修正版雷达图算法，直观展示文理科倾向与学科均衡度。

### 🌟 优势四：企业级数据管理
- **Excel 无缝互通**：支持从常见教务系统导出的 Excel 模板一键导入学生名单与成绩。
- **本地化存储**：采用 SQLite 数据库本地部署，确保学生隐私数据不出校门（除必要的 AI 脱敏交互外）。

---

## 三、技术架构深度解析

### 3.1 总体架构 (MVC 模式)

```mermaid
graph TD
    User[用户层] --> UI[UI 表现层 (PyQt6)]
    UI --> Service[业务逻辑层]
    Service --> Data[数据访问层 (DAO)]
    Service <--> External[外部接口层]
    
    subgraph UI 表现层
        Dashboard[数据总览]
        Analysis[图表分析]
        Chat[AI 对话窗]
    end
    
    subgraph 业务逻辑层
        AIService[AI 核心服务]
        AnalysisService[统计分析服务]
        ChartGenerator[绘图引擎]
    end
    
    subgraph 数据访问层
        DB[SQLite 数据库]
        Models[ORM 模型]
    end
    
    subgraph 外部接口层
        ClaudeAPI[云雾 API]
    end
```

### 3.2 关键技术栈
- **核心框架**: Python 3.9+
- **GUI 引擎**: PyQt6 (实现原生级桌面应用体验)
- **数据分析**: NumPy (数值计算), Pandas (数据清洗)
- **可视化**: Matplotlib (高度定制化的雷达图与趋势图绘制)
- **数据库**: SQLite3 (轻量级关系型数据库，支持 SQL 复杂查询)

---

## 四、AI 引擎与 API 集成详情

本系统集成了先进的大语言模型能力，具体配置如下：

### 4.1 接口配置
- **API 提供商**: 云雾 API (Yunwu AI) - 兼容 Anthropic Claude 协议
- **Base URL**: `https://yunwu.ai`
- **当前模型**: `claude-haiku-4-5-20251001`
- **选择理由**: Haiku 模型在响应速度与推理能力之间取得了最佳平衡，适合即时对话场景。

### 4.2 Prompt 工程设计
系统内置了精心设计的 `CAREER_COUNSELOR_SYSTEM_PROMPT`，包含以下策略：
1.  **人格设定 (Persona)**：资深教育心理学家。
2.  **对话策略 (Strategy)**：
    -   *积极倾听*：复述学生观点以建立共情。
    -   *苏格拉底式提问*：不直接给答案，而是引导思考。
3.  **数据注入 (Injection)**：在系统提示词中动态插入 `student_analysis`（学生成绩摘要），使 AI 具备"上帝视角"。

### 4.3 功能实现细节

#### A. 智能对话 (Chat)
- **流式处理**: 支持多轮对话历史 (`start_session`, `chat`)。
- **上下文管理**: 每次对话自动携带前 n 轮历史与最新的成绩分析结论。

#### B. 报告生成 (Report Generation)
- **结构化输出**: 强制 AI 输出标准 JSON 格式。
- **字段解析**:
    - `personality_traits`: 性格特质分析
    - `subject_recommendations`: 选科建议
    - `career_recommendations`: 职业方向推荐
    - `detailed_analysis`: 综合详细分析文本
- **容错处理**: 内置 JSON 提取与修复逻辑，防止大模型输出格式错误。

---

## 五、未来迭代路线图

### v2.1 (近期规划)
- [ ] **多端同步**: 引入轻量级云端数据库，实现教师端(PC)与学生端(Web/Mobile)数据互通。
- [ ] **OCR 试卷录入**: 集成 OCR 文字识别 API，拍照即可录入错题与分数。
- [ ] **知识图谱可视化**: 使用 D3.js 或 ECharts 替换静态图表，展示动态知识点关联图。

### v2.2 (中期规划)
- [ ] **RAG 增强检索**: 建立校本升学知识库（如历年分数线、专业库），利用 RAG 技术让 AI 回答更精准的升学政策问题。
- [ ] **语音交互**: 增加 ASR/TTS 模块，实现与 AI 规划师的实时语音通话。

### v3.0 (远期愿景)
- [ ] **全生命周期跟踪**: 从初一到高三的全程跟踪，AI 自动生成"三年成长延时摄影"报告。
- [ ] **家校互联平台**: 家长端小程序，实时接收学情预警与 AI 建议。

---

> 💡 **开发者注**: 本系统并非旨在替代人类教师，而是作为增强工具，将教育工作者从繁琐的数据中解放出来，专注于最核心的育人工作。
